# Development override
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml --env-file .env.ports up

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    ports:
      - "${PORT_FRONTEND:-10001}:10001"
    volumes:
      - ./frontend/src:/app/src
      - ./frontend/public:/app/public
      - ./frontend/index.html:/app/index.html
    environment:
      - VITE_API_URL=http://localhost:${PORT_API:-10002}/api

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    volumes:
      - ./backend/src:/app/src
      - ./backend/nodemon.json:/app/nodemon.json
      - ./backend/prisma:/app/prisma
      - ./backend/prisma.config.ts:/app/prisma.config.ts
    environment:
      - NODE_ENV=development
      - CORS_ORIGIN=${CORS_ORIGIN:-http://localhost:10001,https://portfolio.resnizky.ar,https://portfolio-dev.resnizky.ar,https://api.portfolio-dev.resnizky.ar}
